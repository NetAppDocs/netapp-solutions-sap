---
sidebar: sidebar
permalink: backup/anf-cba-create-backup-policies.html
keywords: policy, snapshot, backups, file-based
summary: "Policies are usually configured independently of the resource and can be used by multiple SAP HANA databases. A typical minimum configuration consists of a policy for hourly Snapshot backups and a policy for weekly block integrity check using a file-based backup."
---
= Create backup policies
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./../media/

//
// This file was created with NDAC Version 2.0 (August 17, 2020)
//
// 2023-03-16 10:24:27.255141
//


[.lead]
As discussed before, policies are usually configured independently of the resource and can be used by multiple SAP HANA databases. A typical minimum configuration consists of the following two policies:

* Policy for hourly Snapshot backups: for example, `SnapshotEvery4Hours`.
* Policy for weekly block integrity check using a file-based backup: for example, `WeeklyBlockIntegrityCheck`.

The following sections describe the configuration of these two policies.

== Create policy for Snapshot-based backups

. Go to *Settings* > *Policies* to create a new policy.
+
image:anf-cba-image25.png["This screenshot shows the screen BlueXP > Backup and Recovery > Applications > System."]

. Click *Create Policy*.
+
image:anf-cba-image26.png["This screenshot shows the screen containing the create policy button."]

. Configure the Snapshot name format.
+
NetApp recommends adding additional information to the Snapshot name for easier identification within the HANA backup catalog.
+
[NOTE]
In an HSR setup, you should also add the system name to the name format. Of course, you need to configure the system names of the primary and secondary host in a way that the name includes the role or hostname: for example, `SID-HSR-Primary` or `SID-HSR-Secondary`. With this approach, you can easily identify which host created the backup in the HANA backup catalog.
+
image:anf-cba-image27.png["This screenshot shows the screen BlueXP > Backup and Recovery > Applications > Create Policy. The Name Policy field has been filled out."]

. Configure the schedules. In our example we execute Snapshot backups every 4 hours and keep the backups for 3 days.
+
image:anf-cba-image28.png["This screenshot shows the screen BlueXP > Backup and Recovery > Applications > Create Policy. Scheduling is shown."]

. Optionally,  you can add pre- and post-scripts that are executed with the backup operation.
+
The scripts are executed on the HANA database host. See also https://docs.netapp.com/us-en/cloud-manager-backup-restore/task-backup-cloud-native-sap-hana-data.html[Back up cloud native SAP HANA database | NetApp Documentation^].
+
image:anf-cba-image29.png["This screenshot shows the screen BlueXP > Backup and Recovery > Applications > Create Policy. The Pre and post script fields are shown."]

. The policy for Snapshot-based backups is now created.
+
image:anf-cba-image30.png["This screenshot shows the screen BlueXP > Backup and Recovery > Applications > Policies. Policy creation is shown as complete."]

== Create policy for file-based backup

. Select *Create Policy*.
+
image:anf-cba-image31.png["This screenshot shows the screen BlueXP > Backup and Recovery > Applications > Create Policy."]

. In the Create Policy screen, provide a policy name, backup type, backup naming convention, and the schedule and retention details.
+
image:anf-cba-image32.png["This screenshot shows the screen BlueXP > Backup and Recovery > Applications > Create Policy. Basic policy info is filled in."]

. In our example, we configured a weekly backup on each Sunday and a retention of one *Copy to keep*.
+
[NOTE]
“1” is the lowest number you can configure for *Copies to keep*. That means that you always have at least one file-based backup on the file system. During the execution of the next file-based backup, you need twice the capacity, because the older backup is deleted after the new one has been created.
+
image:anf-cba-image33.png["This screenshot shows the screen BlueXP > Backup and Recovery > Applications > Create Policy. Weekly scheduling is shown."]

. Optionally, you can add pre- and post-scripts, that are executed with the backup operation.
+
image:anf-cba-image34.png["This screenshot shows the screen BlueXP > Backup and Recovery > Applications > Create Policy. Pre- and postscripts fields are indicated."]

. The list of backup policies now shows one policy for Snapshot backups and another policy for file-based backups.
+
image:anf-cba-image35.png["Policy creation is complete."]
